#
#   UNIX & OS/2 Makefile for iMatix SFL Package
#   Requires the iMatix 'c' shell script/command script.
#
#   Generated by Otto v2.2 from buildsfl.txt on 100/04/01, 16:33:28
#   For more info see Otto documentation at http://www.imatix.com.
#   Bug reports & questions to <ewen@imatix.com>
#   ---------------------------------------------------------------
#

#   Default values for library, executable and object extensions
#   For most unix systems EXE should be empty; OS/2 (with EMX) can use this
#   setting if gcc is given the "-Zexe" command ('c.cmd' uses -Zexe).
#
LIB     = .a
EXE     =
OBJ     = .o

#   Configuration options
#
#   The makefile is configured to use the iMatix "c" script to compile
#   link, and archive, to enhance portability.  That script contains all
#   compile, link, and archive options.
#
C       = c
LR      = lr
MAKEDEP = makedepend

#   Libraries -- these are the ones that should always cause a relink if they
#   are updated (the executables in a makefile will also depend on any
#   libraries that are built in that Makefile).
#
LIBRARIES = libsfl$(LIB)

#   Implicit rules
#

#   Reset the suffixes that will be considered to just our own list.
#
#   Unix make programs use the .SUFFIXES psuedo rule for this

.SUFFIXES:
.SUFFIXES: $(EXE) $(LIB) $(OBJ) .c .d .i .l

#   Objects depend on source files with the same name; and are compiled
#   with the iMatix c script without any arguments.
#
.c$(OBJ):
	$(C) -q -c $<

#   And .c files _do_not_ depend on .l files (.l files are Libero files,
#   not lex input files as the default rules think).
#
#   The semicolon is required so GNU make will accept the rule as an override.
#
.l.c: ;

#   But .d and .i files do depend on .l files (these are the ones that Libero
#   will build).
#
.l.d:
	$(LR) $<

.l.i:
	$(LR) $<

#
#   Default rule -- all depends on everything.
#   We do this so that we can define the rule at the end.
#
all: everything

#---------------------------------------------------------------------------
libsfl$(LIB)(sflbits$(OBJ)): sflbits$(OBJ)
	$(C) -q -r libsfl$(LIB) sflbits$(OBJ)

libsfl$(LIB)(sflhttp$(OBJ)): sflhttp$(OBJ)
	$(C) -q -r libsfl$(LIB) sflhttp$(OBJ)

libsfl$(LIB)(sflcomp$(OBJ)): sflcomp$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcomp$(OBJ)

libsfl$(LIB)(sflcons$(OBJ)): sflcons$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcons$(OBJ)

libsfl$(LIB)(sflcryp$(OBJ)): sflcryp$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcryp$(OBJ)

libsfl$(LIB)(sflcvbs$(OBJ)): sflcvbs$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcvbs$(OBJ)

libsfl$(LIB)(sflcvdp$(OBJ)): sflcvdp$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcvdp$(OBJ)

libsfl$(LIB)(sflcvds$(OBJ)): sflcvds$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcvds$(OBJ)

libsfl$(LIB)(sflcvns$(OBJ)): sflcvns$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcvns$(OBJ)

libsfl$(LIB)(sflcvsb$(OBJ)): sflcvsb$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcvsb$(OBJ)

libsfl$(LIB)(sflcvsd$(OBJ)): sflcvsd$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcvsd$(OBJ)

libsfl$(LIB)(sflcvsn$(OBJ)): sflcvsn$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcvsn$(OBJ)

libsfl$(LIB)(sflcvst$(OBJ)): sflcvst$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcvst$(OBJ)

libsfl$(LIB)(sflcvtp$(OBJ)): sflcvtp$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcvtp$(OBJ)

libsfl$(LIB)(sflcvts$(OBJ)): sflcvts$(OBJ)
	$(C) -q -r libsfl$(LIB) sflcvts$(OBJ)

libsfl$(LIB)(sflconv$(OBJ)): sflconv$(OBJ)
	$(C) -q -r libsfl$(LIB) sflconv$(OBJ)

libsfl$(LIB)(sfldate$(OBJ)): sfldate$(OBJ)
	$(C) -q -r libsfl$(LIB) sfldate$(OBJ)

libsfl$(LIB)(sfldbio$(OBJ)): sfldbio$(OBJ)
	$(C) -q -r libsfl$(LIB) sfldbio$(OBJ)

libsfl$(LIB)(sfldir$(OBJ)): sfldir$(OBJ)
	$(C) -q -r libsfl$(LIB) sfldir$(OBJ)

libsfl$(LIB)(sflenv$(OBJ)): sflenv$(OBJ)
	$(C) -q -r libsfl$(LIB) sflenv$(OBJ)

libsfl$(LIB)(sflexdr$(OBJ)): sflexdr$(OBJ)
	$(C) -q -r libsfl$(LIB) sflexdr$(OBJ)

libsfl$(LIB)(sflfile$(OBJ)): sflfile$(OBJ)
	$(C) -q -r libsfl$(LIB) sflfile$(OBJ)

libsfl$(LIB)(sflfind$(OBJ)): sflfind$(OBJ)
	$(C) -q -r libsfl$(LIB) sflfind$(OBJ)

libsfl$(LIB)(sflfort$(OBJ)): sflfort$(OBJ)
	$(C) -q -r libsfl$(LIB) sflfort$(OBJ)

libsfl$(LIB)(sflini$(OBJ)): sflini$(OBJ)
	$(C) -q -r libsfl$(LIB) sflini$(OBJ)

libsfl$(LIB)(sfllang$(OBJ)): sfllang$(OBJ)
	$(C) -q -r libsfl$(LIB) sfllang$(OBJ)

libsfl$(LIB)(sfllbuf$(OBJ)): sfllbuf$(OBJ)
	$(C) -q -r libsfl$(LIB) sfllbuf$(OBJ)

libsfl$(LIB)(sfllist$(OBJ)): sfllist$(OBJ)
	$(C) -q -r libsfl$(LIB) sfllist$(OBJ)

libsfl$(LIB)(sflmail$(OBJ)): sflmail$(OBJ)
	$(C) -q -r libsfl$(LIB) sflmail$(OBJ)

libsfl$(LIB)(sflmath$(OBJ)): sflmath$(OBJ)
	$(C) -q -r libsfl$(LIB) sflmath$(OBJ)

libsfl$(LIB)(sflmem$(OBJ)): sflmem$(OBJ)
	$(C) -q -r libsfl$(LIB) sflmem$(OBJ)

libsfl$(LIB)(sflmesg$(OBJ)): sflmesg$(OBJ)
	$(C) -q -r libsfl$(LIB) sflmesg$(OBJ)

libsfl$(LIB)(sflmime$(OBJ)): sflmime$(OBJ)
	$(C) -q -r libsfl$(LIB) sflmime$(OBJ)

libsfl$(LIB)(sflmysql$(OBJ)): sflmysql$(OBJ)
	$(C) -q -r libsfl$(LIB) sflmysql$(OBJ)

libsfl$(LIB)(sflnode$(OBJ)): sflnode$(OBJ)
	$(C) -q -r libsfl$(LIB) sflnode$(OBJ)

libsfl$(LIB)(sflproc$(OBJ)): sflproc$(OBJ)
	$(C) -q -r libsfl$(LIB) sflproc$(OBJ)

libsfl$(LIB)(sflprint$(OBJ)): sflprint$(OBJ)
	$(C) -q -r libsfl$(LIB) sflprint$(OBJ)

libsfl$(LIB)(sflslot$(OBJ)): sflslot$(OBJ)
	$(C) -q -r libsfl$(LIB) sflslot$(OBJ)

libsfl$(LIB)(sflsock$(OBJ)): sflsock$(OBJ)
	$(C) -q -r libsfl$(LIB) sflsock$(OBJ)

libsfl$(LIB)(sflstr$(OBJ)): sflstr$(OBJ)
	$(C) -q -r libsfl$(LIB) sflstr$(OBJ)

libsfl$(LIB)(sflsymb$(OBJ)): sflsymb$(OBJ)
	$(C) -q -r libsfl$(LIB) sflsymb$(OBJ)

libsfl$(LIB)(sflsyst$(OBJ)): sflsyst$(OBJ)
	$(C) -q -r libsfl$(LIB) sflsyst$(OBJ)

libsfl$(LIB)(sfltok$(OBJ)): sfltok$(OBJ)
	$(C) -q -r libsfl$(LIB) sfltok$(OBJ)

libsfl$(LIB)(sfltree$(OBJ)): sfltree$(OBJ)
	$(C) -q -r libsfl$(LIB) sfltree$(OBJ)

libsfl$(LIB)(sfltron$(OBJ)): sfltron$(OBJ)
	$(C) -q -r libsfl$(LIB) sfltron$(OBJ)

libsfl$(LIB)(sfluid$(OBJ)): sfluid$(OBJ)
	$(C) -q -r libsfl$(LIB) sfluid$(OBJ)

libsfl$(LIB)(sflxml$(OBJ)): sflxml$(OBJ)
	$(C) -q -r libsfl$(LIB) sflxml$(OBJ)

libsfl$(LIB)(sflxmll$(OBJ)): sflxmll$(OBJ)
	$(C) -q -r libsfl$(LIB) sflxmll$(OBJ)

LIBSFL_LIST = libsfl$(LIB)(sflbits$(OBJ)) libsfl$(LIB)(sflhttp$(OBJ)) libsfl$(LIB)(sflcomp$(OBJ)) libsfl$(LIB)(sflcons$(OBJ)) libsfl$(LIB)(sflcryp$(OBJ)) libsfl$(LIB)(sflcvbs$(OBJ)) libsfl$(LIB)(sflcvdp$(OBJ)) libsfl$(LIB)(sflcvds$(OBJ)) libsfl$(LIB)(sflcvns$(OBJ)) libsfl$(LIB)(sflcvsb$(OBJ)) libsfl$(LIB)(sflcvsd$(OBJ)) libsfl$(LIB)(sflcvsn$(OBJ)) libsfl$(LIB)(sflcvst$(OBJ)) libsfl$(LIB)(sflcvtp$(OBJ)) libsfl$(LIB)(sflcvts$(OBJ)) libsfl$(LIB)(sflconv$(OBJ)) libsfl$(LIB)(sfldate$(OBJ)) libsfl$(LIB)(sfldbio$(OBJ)) libsfl$(LIB)(sfldir$(OBJ)) libsfl$(LIB)(sflenv$(OBJ)) libsfl$(LIB)(sflexdr$(OBJ)) libsfl$(LIB)(sflfile$(OBJ)) libsfl$(LIB)(sflfind$(OBJ)) libsfl$(LIB)(sflfort$(OBJ)) libsfl$(LIB)(sflini$(OBJ)) libsfl$(LIB)(sfllang$(OBJ)) libsfl$(LIB)(sfllbuf$(OBJ)) libsfl$(LIB)(sfllist$(OBJ)) libsfl$(LIB)(sflmail$(OBJ)) libsfl$(LIB)(sflmath$(OBJ)) libsfl$(LIB)(sflmem$(OBJ)) libsfl$(LIB)(sflmesg$(OBJ)) libsfl$(LIB)(sflmime$(OBJ)) libsfl$(LIB)(sflmysql$(OBJ)) libsfl$(LIB)(sflnode$(OBJ)) libsfl$(LIB)(sflproc$(OBJ)) libsfl$(LIB)(sflprint$(OBJ)) libsfl$(LIB)(sflslot$(OBJ)) libsfl$(LIB)(sflsock$(OBJ)) libsfl$(LIB)(sflstr$(OBJ)) libsfl$(LIB)(sflsymb$(OBJ)) libsfl$(LIB)(sflsyst$(OBJ)) libsfl$(LIB)(sfltok$(OBJ)) libsfl$(LIB)(sfltree$(OBJ)) libsfl$(LIB)(sfltron$(OBJ)) libsfl$(LIB)(sfluid$(OBJ)) libsfl$(LIB)(sflxml$(OBJ)) libsfl$(LIB)(sflxmll$(OBJ))

# Force the library to be dependant on its bits.
#
libsfl$(LIB): $(LIBSFL_LIST)

testall$(EXE): testall$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testall

testbits$(EXE): testbits$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testbits

testcomp$(EXE): testcomp$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testcomp

testconv$(EXE): testconv$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testconv

testcryp$(EXE): testcryp$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testcryp

testdate$(EXE): testdate$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testdate

testdes$(EXE): testdes$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testdes

testexdr$(EXE): testexdr$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testexdr

testfind$(EXE): testfind$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testfind

testmem$(EXE): testmem$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testmem

testmime$(EXE): testmime$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testmime

testsym$(EXE): testsym$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testsym

testtree$(EXE): testtree$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testtree

testuid$(EXE): testuid$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testuid

testcgi$(EXE): testcgi$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testcgi

testdir$(EXE): testdir$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testdir

teststr$(EXE): teststr$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L teststr

testxml$(EXE): testxml$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testxml

testtron$(EXE): testtron$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testtron

testfort$(EXE): testfort$(OBJ) $(LIBRARIES) libsfl$(LIB)
	$(C) -q -L testfort

everything: libsfl$(LIB) testall$(EXE) testbits$(EXE) testcomp$(EXE) testconv$(EXE) testcryp$(EXE) testdate$(EXE) testdes$(EXE) testexdr$(EXE) testfind$(EXE) testmem$(EXE) testmime$(EXE) testsym$(EXE) testtree$(EXE) testuid$(EXE) testcgi$(EXE) testdir$(EXE) teststr$(EXE) testxml$(EXE) testtron$(EXE) testfort$(EXE)

SRCS = sflbits.c sflhttp.c sflcomp.c sflcons.c sflcryp.c sflcvbs.c sflcvdp.c sflcvds.c sflcvns.c sflcvsb.c sflcvsd.c sflcvsn.c sflcvst.c sflcvtp.c sflcvts.c sflconv.c sfldate.c sfldbio.c sfldir.c sflenv.c sflexdr.c sflfile.c sflfind.c sflfort.c sflini.c sfllang.c sfllbuf.c sfllist.c sflmail.c sflmath.c sflmem.c sflmesg.c sflmime.c sflmysql.c sflnode.c sflproc.c sflprint.c sflslot.c sflsock.c sflstr.c sflsymb.c sflsyst.c sfltok.c sfltree.c sfltron.c sfluid.c sflxml.c sflxmll.c testall.c testbits.c testcomp.c testconv.c testcryp.c testdate.c testdes.c testexdr.c testfind.c testmem.c testmime.c testsym.c testtree.c testuid.c testcgi.c testdir.c teststr.c testxml.c testtron.c testfort.c

# Build dependencies, using makedepend. 
#
# Yes, this rule is very ugly.  It's an attempt to be portable
# about the way that makedepend is called, including picking up
# the flags to call the compiler with for makedepend to use.
#
# See otto.fmt for details.
#
depend:
	rm -f temp1111.cmd temp1111.xxx
	echo $(MAKEDEP) -- >temp1111.xxx
	$(C) -C | perl -ne "@a = split; shift(@a); shift(@a); print join(' ', @a), qq(\\n);" >>temp1111.xxx
	echo -- $(SRCS) >>temp1111.xxx
	perl -e "while(<>) {chop; print; print ' ';} print qq(\\n);" temp1111.xxx >temp1111.cmd
	chmod +x temp1111.cmd
	sh temp1111.cmd
