@echo off
:-
:-  Build script for iMatix SFL Package, for generic MS-DOS.
:-  Requires the iMatix 'c' batch file.
:-
:-  Generated by Otto v2.2 from buildsfl.txt on 100/04/01, 16:33:28
:-  For more info see Otto documentation at http://www.imatix.com.
:-  Bug reports & questions to <ph@imatix.com>
:-  ---------------------------------------------------------------
:-
echo Building the iMatix Standard Function Library
echo Press [Enter] to continue, or Ctrl-C to abort.
if .%1==. pause >nul
echo Checking for required files...

:-  require prelude.h
if exist prelude.h goto end_1
    echo prelude.h missing - aborting
    goto exit
:end_1

:-  require sflbits.h  sflbits.c
if exist sflbits.h goto end_2
    echo sflbits.h missing - aborting
    goto exit
:end_2
if exist sflbits.c goto end_3
    echo sflbits.c missing - aborting
    goto exit
:end_3

:-  require sflhttp.h  sflhttp.c
if exist sflhttp.h goto end_4
    echo sflhttp.h missing - aborting
    goto exit
:end_4
if exist sflhttp.c goto end_5
    echo sflhttp.c missing - aborting
    goto exit
:end_5

:-  require sflcomp.h  sflcomp.c
if exist sflcomp.h goto end_6
    echo sflcomp.h missing - aborting
    goto exit
:end_6
if exist sflcomp.c goto end_7
    echo sflcomp.c missing - aborting
    goto exit
:end_7

:-  require sflcons.h  sflcons.c
if exist sflcons.h goto end_8
    echo sflcons.h missing - aborting
    goto exit
:end_8
if exist sflcons.c goto end_9
    echo sflcons.c missing - aborting
    goto exit
:end_9

:-  require sflconv.h  sflcvbs.c  sflcvdp.c  sflcvds.c  sflcvns.c
if exist sflconv.h goto end_10
    echo sflconv.h missing - aborting
    goto exit
:end_10
if exist sflcvbs.c goto end_11
    echo sflcvbs.c missing - aborting
    goto exit
:end_11
if exist sflcvdp.c goto end_12
    echo sflcvdp.c missing - aborting
    goto exit
:end_12
if exist sflcvds.c goto end_13
    echo sflcvds.c missing - aborting
    goto exit
:end_13
if exist sflcvns.c goto end_14
    echo sflcvns.c missing - aborting
    goto exit
:end_14

:-  require            sflcvsb.c  sflcvsd.c  sflcvsn.c
if exist sflcvsb.c goto end_15
    echo sflcvsb.c missing - aborting
    goto exit
:end_15
if exist sflcvsd.c goto end_16
    echo sflcvsd.c missing - aborting
    goto exit
:end_16
if exist sflcvsn.c goto end_17
    echo sflcvsn.c missing - aborting
    goto exit
:end_17

:-  require            sflcvtp.c  sflcvts.c  sflconv.c
if exist sflcvtp.c goto end_18
    echo sflcvtp.c missing - aborting
    goto exit
:end_18
if exist sflcvts.c goto end_19
    echo sflcvts.c missing - aborting
    goto exit
:end_19
if exist sflconv.c goto end_20
    echo sflconv.c missing - aborting
    goto exit
:end_20

:-  require sflcvst.c  sflcvst.d  sflcvst.i
if exist sflcvst.c goto end_21
    echo sflcvst.c missing - aborting
    goto exit
:end_21
if exist sflcvst.d goto end_22
    echo sflcvst.d missing - aborting
    goto exit
:end_22
if exist sflcvst.i goto end_23
    echo sflcvst.i missing - aborting
    goto exit
:end_23

:-  require sflcryp.h  sflcryp.c
if exist sflcryp.h goto end_24
    echo sflcryp.h missing - aborting
    goto exit
:end_24
if exist sflcryp.c goto end_25
    echo sflcryp.c missing - aborting
    goto exit
:end_25

:-  require sfldate.h  sfldate.c
if exist sfldate.h goto end_26
    echo sfldate.h missing - aborting
    goto exit
:end_26
if exist sfldate.c goto end_27
    echo sfldate.c missing - aborting
    goto exit
:end_27

:-  require sfldbio.h  sfldbio.c
if exist sfldbio.h goto end_28
    echo sfldbio.h missing - aborting
    goto exit
:end_28
if exist sfldbio.c goto end_29
    echo sfldbio.c missing - aborting
    goto exit
:end_29

:-  require sfldir.h   sfldir.c
if exist sfldir.h goto end_30
    echo sfldir.h missing - aborting
    goto exit
:end_30
if exist sfldir.c goto end_31
    echo sfldir.c missing - aborting
    goto exit
:end_31

:-  require sflenv.h   sflenv.c
if exist sflenv.h goto end_32
    echo sflenv.h missing - aborting
    goto exit
:end_32
if exist sflenv.c goto end_33
    echo sflenv.c missing - aborting
    goto exit
:end_33

:-  require sflexdr.h  sflexdr.c
if exist sflexdr.h goto end_34
    echo sflexdr.h missing - aborting
    goto exit
:end_34
if exist sflexdr.c goto end_35
    echo sflexdr.c missing - aborting
    goto exit
:end_35

:-  require sflfile.h  sflfile.c
if exist sflfile.h goto end_36
    echo sflfile.h missing - aborting
    goto exit
:end_36
if exist sflfile.c goto end_37
    echo sflfile.c missing - aborting
    goto exit
:end_37

:-  require sflfind.h  sflfind.c
if exist sflfind.h goto end_38
    echo sflfind.h missing - aborting
    goto exit
:end_38
if exist sflfind.c goto end_39
    echo sflfind.c missing - aborting
    goto exit
:end_39

:-  require sflfort.h  sflfort.c
if exist sflfort.h goto end_40
    echo sflfort.h missing - aborting
    goto exit
:end_40
if exist sflfort.c goto end_41
    echo sflfort.c missing - aborting
    goto exit
:end_41

:-  require sflini.h   sflini.c
if exist sflini.h goto end_42
    echo sflini.h missing - aborting
    goto exit
:end_42
if exist sflini.c goto end_43
    echo sflini.c missing - aborting
    goto exit
:end_43

:-  require sfllang.h  sfllang.c
if exist sfllang.h goto end_44
    echo sfllang.h missing - aborting
    goto exit
:end_44
if exist sfllang.c goto end_45
    echo sfllang.c missing - aborting
    goto exit
:end_45

:-  require sfllbuf.h  sfllbuf.c
if exist sfllbuf.h goto end_46
    echo sfllbuf.h missing - aborting
    goto exit
:end_46
if exist sfllbuf.c goto end_47
    echo sfllbuf.c missing - aborting
    goto exit
:end_47

:-  require sfllist.h  sfllist.c
if exist sfllist.h goto end_48
    echo sfllist.h missing - aborting
    goto exit
:end_48
if exist sfllist.c goto end_49
    echo sfllist.c missing - aborting
    goto exit
:end_49

:-  require sflmail.h  sflmail.c
if exist sflmail.h goto end_50
    echo sflmail.h missing - aborting
    goto exit
:end_50
if exist sflmail.c goto end_51
    echo sflmail.c missing - aborting
    goto exit
:end_51

:-  require sflmath.h  sflmath.c
if exist sflmath.h goto end_52
    echo sflmath.h missing - aborting
    goto exit
:end_52
if exist sflmath.c goto end_53
    echo sflmath.c missing - aborting
    goto exit
:end_53

:-  require sflmem.h   sflmem.c
if exist sflmem.h goto end_54
    echo sflmem.h missing - aborting
    goto exit
:end_54
if exist sflmem.c goto end_55
    echo sflmem.c missing - aborting
    goto exit
:end_55

:-  require sflmesg.h  sflmesg.c
if exist sflmesg.h goto end_56
    echo sflmesg.h missing - aborting
    goto exit
:end_56
if exist sflmesg.c goto end_57
    echo sflmesg.c missing - aborting
    goto exit
:end_57

:-  require sflmysql.h sflmysql.c
if exist sflmysql.h goto end_58
    echo sflmysql.h missing - aborting
    goto exit
:end_58
if exist sflmysql.c goto end_59
    echo sflmysql.c missing - aborting
    goto exit
:end_59

:-  require sflmime.h  sflmime.c
if exist sflmime.h goto end_60
    echo sflmime.h missing - aborting
    goto exit
:end_60
if exist sflmime.c goto end_61
    echo sflmime.c missing - aborting
    goto exit
:end_61

:-  require sflnode.h  sflnode.c
if exist sflnode.h goto end_62
    echo sflnode.h missing - aborting
    goto exit
:end_62
if exist sflnode.c goto end_63
    echo sflnode.c missing - aborting
    goto exit
:end_63

:-  require sflproc.h  sflproc.c
if exist sflproc.h goto end_64
    echo sflproc.h missing - aborting
    goto exit
:end_64
if exist sflproc.c goto end_65
    echo sflproc.c missing - aborting
    goto exit
:end_65

:-  require sflprint.h sflprint.c
if exist sflprint.h goto end_66
    echo sflprint.h missing - aborting
    goto exit
:end_66
if exist sflprint.c goto end_67
    echo sflprint.c missing - aborting
    goto exit
:end_67

:-  require sflslot.h  sflslot.c
if exist sflslot.h goto end_68
    echo sflslot.h missing - aborting
    goto exit
:end_68
if exist sflslot.c goto end_69
    echo sflslot.c missing - aborting
    goto exit
:end_69

:-  require sflsock.h  sflsock.c
if exist sflsock.h goto end_70
    echo sflsock.h missing - aborting
    goto exit
:end_70
if exist sflsock.c goto end_71
    echo sflsock.c missing - aborting
    goto exit
:end_71

:-  require sflstr.h   sflstr.c
if exist sflstr.h goto end_72
    echo sflstr.h missing - aborting
    goto exit
:end_72
if exist sflstr.c goto end_73
    echo sflstr.c missing - aborting
    goto exit
:end_73

:-  require sflsymb.h  sflsymb.c
if exist sflsymb.h goto end_74
    echo sflsymb.h missing - aborting
    goto exit
:end_74
if exist sflsymb.c goto end_75
    echo sflsymb.c missing - aborting
    goto exit
:end_75

:-  require sflsyst.h  sflsyst.c
if exist sflsyst.h goto end_76
    echo sflsyst.h missing - aborting
    goto exit
:end_76
if exist sflsyst.c goto end_77
    echo sflsyst.c missing - aborting
    goto exit
:end_77

:-  require sfltok.h   sfltok.c
if exist sfltok.h goto end_78
    echo sfltok.h missing - aborting
    goto exit
:end_78
if exist sfltok.c goto end_79
    echo sfltok.c missing - aborting
    goto exit
:end_79

:-  require sfltree.h  sfltree.c
if exist sfltree.h goto end_80
    echo sfltree.h missing - aborting
    goto exit
:end_80
if exist sfltree.c goto end_81
    echo sfltree.c missing - aborting
    goto exit
:end_81

:-  require sfltron.h  sfltron.c
if exist sfltron.h goto end_82
    echo sfltron.h missing - aborting
    goto exit
:end_82
if exist sfltron.c goto end_83
    echo sfltron.c missing - aborting
    goto exit
:end_83

:-  require sfluid.h   sfluid.c
if exist sfluid.h goto end_84
    echo sfluid.h missing - aborting
    goto exit
:end_84
if exist sfluid.c goto end_85
    echo sfluid.c missing - aborting
    goto exit
:end_85

:-  require sflxml.h   sflxml.c
if exist sflxml.h goto end_86
    echo sflxml.h missing - aborting
    goto exit
:end_86
if exist sflxml.c goto end_87
    echo sflxml.c missing - aborting
    goto exit
:end_87

:-  require sflxmll.c  sflxmll.d  sflxmll.i
if exist sflxmll.c goto end_88
    echo sflxmll.c missing - aborting
    goto exit
:end_88
if exist sflxmll.d goto end_89
    echo sflxmll.d missing - aborting
    goto exit
:end_89
if exist sflxmll.i goto end_90
    echo sflxmll.i missing - aborting
    goto exit
:end_90

:-  require testall.c
if exist testall.c goto end_91
    echo testall.c missing - aborting
    goto exit
:end_91

:-  require testbits.c
if exist testbits.c goto end_92
    echo testbits.c missing - aborting
    goto exit
:end_92

:-  require testcomp.c
if exist testcomp.c goto end_93
    echo testcomp.c missing - aborting
    goto exit
:end_93

:-  require testconv.c
if exist testconv.c goto end_94
    echo testconv.c missing - aborting
    goto exit
:end_94

:-  require testcryp.c
if exist testcryp.c goto end_95
    echo testcryp.c missing - aborting
    goto exit
:end_95

:-  require testdate.c
if exist testdate.c goto end_96
    echo testdate.c missing - aborting
    goto exit
:end_96

:-  require testdes.c
if exist testdes.c goto end_97
    echo testdes.c missing - aborting
    goto exit
:end_97

:-  require testdir.c
if exist testdir.c goto end_98
    echo testdir.c missing - aborting
    goto exit
:end_98

:-  require testexdr.c
if exist testexdr.c goto end_99
    echo testexdr.c missing - aborting
    goto exit
:end_99

:-  require testfind.c
if exist testfind.c goto end_100
    echo testfind.c missing - aborting
    goto exit
:end_100

:-  require testfort.c
if exist testfort.c goto end_101
    echo testfort.c missing - aborting
    goto exit
:end_101

:-  require testmem.c
if exist testmem.c goto end_102
    echo testmem.c missing - aborting
    goto exit
:end_102

:-  require testmime.c
if exist testmime.c goto end_103
    echo testmime.c missing - aborting
    goto exit
:end_103

:-  require teststr.c
if exist teststr.c goto end_104
    echo teststr.c missing - aborting
    goto exit
:end_104

:-  require testsym.c
if exist testsym.c goto end_105
    echo testsym.c missing - aborting
    goto exit
:end_105

:-  require testtree.c
if exist testtree.c goto end_106
    echo testtree.c missing - aborting
    goto exit
:end_106

:-  require testtron.c
if exist testtron.c goto end_107
    echo testtron.c missing - aborting
    goto exit
:end_107

:-  require testuid.c
if exist testuid.c goto end_108
    echo testuid.c missing - aborting
    goto exit
:end_108

:-  require testxml.c
if exist testxml.c goto end_109
    echo testxml.c missing - aborting
    goto exit
:end_109

:-  require testcgi.c
if exist testcgi.c goto end_110
    echo testcgi.c missing - aborting
    goto exit
:end_110

:-  delete $lib libsfl
if exist libsfl.lib del libsfl.lib

:-  library libsfl

:-  compile sflbits
call c sflbits
if not exist sflbits.obj goto exit
call c -r libsfl.lib sflbits

:-  compile sflhttp
call c sflhttp
if not exist sflhttp.obj goto exit
call c -r libsfl.lib sflhttp

:-  compile sflcomp
call c sflcomp
if not exist sflcomp.obj goto exit
call c -r libsfl.lib sflcomp

:-  compile sflcons
call c sflcons
if not exist sflcons.obj goto exit
call c -r libsfl.lib sflcons

:-  compile sflcryp
call c sflcryp
if not exist sflcryp.obj goto exit
call c -r libsfl.lib sflcryp

:-  compile sflcvbs sflcvdp sflcvds sflcvns
call c sflcvbs
if not exist sflcvbs.obj goto exit
call c -r libsfl.lib sflcvbs
call c sflcvdp
if not exist sflcvdp.obj goto exit
call c -r libsfl.lib sflcvdp
call c sflcvds
if not exist sflcvds.obj goto exit
call c -r libsfl.lib sflcvds
call c sflcvns
if not exist sflcvns.obj goto exit
call c -r libsfl.lib sflcvns

:-  compile sflcvsb sflcvsd sflcvsn sflcvst
call c sflcvsb
if not exist sflcvsb.obj goto exit
call c -r libsfl.lib sflcvsb
call c sflcvsd
if not exist sflcvsd.obj goto exit
call c -r libsfl.lib sflcvsd
call c sflcvsn
if not exist sflcvsn.obj goto exit
call c -r libsfl.lib sflcvsn
call c sflcvst
if not exist sflcvst.obj goto exit
call c -r libsfl.lib sflcvst

:-  compile sflcvtp sflcvts sflconv
call c sflcvtp
if not exist sflcvtp.obj goto exit
call c -r libsfl.lib sflcvtp
call c sflcvts
if not exist sflcvts.obj goto exit
call c -r libsfl.lib sflcvts
call c sflconv
if not exist sflconv.obj goto exit
call c -r libsfl.lib sflconv

:-  compile sfldate
call c sfldate
if not exist sfldate.obj goto exit
call c -r libsfl.lib sfldate

:-  compile sfldbio
call c sfldbio
if not exist sfldbio.obj goto exit
call c -r libsfl.lib sfldbio

:-  compile sfldir
call c sfldir
if not exist sfldir.obj goto exit
call c -r libsfl.lib sfldir

:-  compile sflenv
call c sflenv
if not exist sflenv.obj goto exit
call c -r libsfl.lib sflenv

:-  compile sflexdr
call c sflexdr
if not exist sflexdr.obj goto exit
call c -r libsfl.lib sflexdr

:-  compile sflfile
call c sflfile
if not exist sflfile.obj goto exit
call c -r libsfl.lib sflfile

:-  compile sflfind
call c sflfind
if not exist sflfind.obj goto exit
call c -r libsfl.lib sflfind

:-  compile sflfort
call c sflfort
if not exist sflfort.obj goto exit
call c -r libsfl.lib sflfort

:-  compile sflini
call c sflini
if not exist sflini.obj goto exit
call c -r libsfl.lib sflini

:-  compile sfllang
call c sfllang
if not exist sfllang.obj goto exit
call c -r libsfl.lib sfllang

:-  compile sfllbuf
call c sfllbuf
if not exist sfllbuf.obj goto exit
call c -r libsfl.lib sfllbuf

:-  compile sfllist
call c sfllist
if not exist sfllist.obj goto exit
call c -r libsfl.lib sfllist

:-  compile sflmail
call c sflmail
if not exist sflmail.obj goto exit
call c -r libsfl.lib sflmail

:-  compile sflmath
call c sflmath
if not exist sflmath.obj goto exit
call c -r libsfl.lib sflmath

:-  compile sflmem
call c sflmem
if not exist sflmem.obj goto exit
call c -r libsfl.lib sflmem

:-  compile sflmesg
call c sflmesg
if not exist sflmesg.obj goto exit
call c -r libsfl.lib sflmesg

:-  compile sflmime
call c sflmime
if not exist sflmime.obj goto exit
call c -r libsfl.lib sflmime

:-  compile sflmysql
call c sflmysql
if not exist sflmysql.obj goto exit
call c -r libsfl.lib sflmysql

:-  compile sflnode
call c sflnode
if not exist sflnode.obj goto exit
call c -r libsfl.lib sflnode

:-  compile sflproc
call c sflproc
if not exist sflproc.obj goto exit
call c -r libsfl.lib sflproc

:-  compile sflprint
call c sflprint
if not exist sflprint.obj goto exit
call c -r libsfl.lib sflprint

:-  compile sflslot
call c sflslot
if not exist sflslot.obj goto exit
call c -r libsfl.lib sflslot

:-  compile sflsock
call c sflsock
if not exist sflsock.obj goto exit
call c -r libsfl.lib sflsock

:-  compile sflstr
call c sflstr
if not exist sflstr.obj goto exit
call c -r libsfl.lib sflstr

:-  compile sflsymb
call c sflsymb
if not exist sflsymb.obj goto exit
call c -r libsfl.lib sflsymb

:-  compile sflsyst
call c sflsyst
if not exist sflsyst.obj goto exit
call c -r libsfl.lib sflsyst

:-  compile sfltok
call c sfltok
if not exist sfltok.obj goto exit
call c -r libsfl.lib sfltok

:-  compile sfltree
call c sfltree
if not exist sfltree.obj goto exit
call c -r libsfl.lib sfltree

:-  compile sfltron
call c sfltron
if not exist sfltron.obj goto exit
call c -r libsfl.lib sfltron

:-  compile sfluid
call c sfluid
if not exist sfluid.obj goto exit
call c -r libsfl.lib sfluid

:-  compile sflxml
call c sflxml
if not exist sflxml.obj goto exit
call c -r libsfl.lib sflxml

:-  compile sflxmll
call c sflxmll
if not exist sflxmll.obj goto exit
call c -r libsfl.lib sflxmll

:-  call buildh
call buildh 

:-  library

:-  compile testall  testbits testcomp testconv testcryp testdate testdes
call c testall
if not exist testall.obj goto exit
call c testbits
if not exist testbits.obj goto exit
call c testcomp
if not exist testcomp.obj goto exit
call c testconv
if not exist testconv.obj goto exit
call c testcryp
if not exist testcryp.obj goto exit
call c testdate
if not exist testdate.obj goto exit
call c testdes
if not exist testdes.obj goto exit

:-  compile testexdr testfind testmem  testmime testsym  testtree testuid
call c testexdr
if not exist testexdr.obj goto exit
call c testfind
if not exist testfind.obj goto exit
call c testmem
if not exist testmem.obj goto exit
call c testmime
if not exist testmime.obj goto exit
call c testsym
if not exist testsym.obj goto exit
call c testtree
if not exist testtree.obj goto exit
call c testuid
if not exist testuid.obj goto exit

:-  link    testall  testbits testcomp testconv testcryp testdate testdes
call c -L testall
call c -L testbits
call c -L testcomp
call c -L testconv
call c -L testcryp
call c -L testdate
call c -L testdes

:-  link    testexdr testfind testmem  testmime testsym  testtree testuid
call c -L testexdr
call c -L testfind
call c -L testmem
call c -L testmime
call c -L testsym
call c -L testtree
call c -L testuid

:-  compile testcgi  testdir  teststr  testxml  testtron testfort
call c testcgi
if not exist testcgi.obj goto exit
call c testdir
if not exist testdir.obj goto exit
call c teststr
if not exist teststr.obj goto exit
call c testxml
if not exist testxml.obj goto exit
call c testtron
if not exist testtron.obj goto exit
call c testfort
if not exist testfort.obj goto exit

:-  link    testcgi  testdir  teststr  testxml  testtron testfort
call c -L testcgi
call c -L testdir
call c -L teststr
call c -L testxml
call c -L testtron
call c -L testfort
echo SFL built successfully.

:exit
:-- end script
